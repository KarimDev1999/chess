var myApp;myApp=(()=>{"use strict";var t={272:(t,e,r)=>{r.r(e);class o{constructor(t,e){this.name=t,this.color=e,this.startPos="black"===e?[{y:7,x:1},{y:7,x:2},{y:7,x:3},{y:7,x:4},{y:7,x:5},{y:7,x:6},{y:7,x:7},{y:7,x:8}]:[{y:2,x:1},{y:2,x:2},{y:2,x:3},{y:2,x:4},{y:2,x:5},{y:2,x:6},{y:2,x:7},{y:2,x:8}]}}class s{constructor(t,e){this.name=t,this.color=e,this.startPos="black"===e?[{y:8,x:1},{y:8,x:8}]:[{y:1,x:1},{y:1,x:8}]}}class u{constructor(t,e){this.name=t,this.color=e,this.startPos="black"===e?[{y:8,x:2},{y:8,x:7}]:[{y:1,x:2},{y:1,x:7}]}}class c{constructor(t,e){this.name=t,this.color=e,this.startPos="black"===e?[{y:8,x:3},{y:8,x:6}]:[{y:1,x:3},{y:1,x:6}]}}class i{constructor(t,e){this.name=t,this.color=e,this.startPos="black"===e?[{y:8,x:4}]:[{y:1,x:4}]}}class p{constructor(t,e){this.name=t,this.color=e,this.startPos="black"===e?[{y:8,x:5}]:[{y:1,x:5}]}}const n=t=>t.getAttribute("piece").split("-")[1],l=t=>t.getAttribute("piece").split("-")[0],a=t=>{let e;return e="black"===l(t)?1:-1,e},b=t=>{let e=new Array(4).fill(null),r=!1,o=e.map(((e,o)=>{let s=[];o%2==0&&(r=!r);for(let e=1;e<=7;e++)o%2!=0||r?o%2==0||r?o%2==0&&r?s.push(document.querySelector(`[posY="${+t.getAttribute("posY")+e}"][posX="${+t.getAttribute("posX")-e}"]`)):o%2!=0&&r&&s.push(document.querySelector(`[posY="${+t.getAttribute("posY")-e}"][posX="${+t.getAttribute("posX")+e}"]`)):s.push(document.querySelector(`[posY="${+t.getAttribute("posY")+e}"][posX="${+t.getAttribute("posX")+e}"]`)):s.push(document.querySelector(`[posY="${+t.getAttribute("posY")-e}"][posX="${+t.getAttribute("posX")-e}"]`));return s}));return o.forEach((t=>t.forEach(((e,r)=>e&&null!==e.getAttribute("piece")?t.splice(r+1):null)))),o},A=t=>{let e=new Array(4).fill(null),r=!1,o=e.map(((e,o)=>{let s=[];o%2==0&&(r=!r);for(let e=1;e<=7;e++)o%2!=0||r?o%2==0||r?o%2==0&&r?s.push(document.querySelector(`[posY="${+t.getAttribute("posY")+e}"][posX="${+t.getAttribute("posX")}"]`)):o%2!=0&&r&&s.push(document.querySelector(`[posY="${+t.getAttribute("posY")-e}"][posX="${+t.getAttribute("posX")}"]`)):s.push(document.querySelector(`[posY="${+t.getAttribute("posY")}"][posX="${+t.getAttribute("posX")+e}"]`)):s.push(document.querySelector(`[posY="${+t.getAttribute("posY")}"][posX="${+t.getAttribute("posX")-e}"]`));return s}));return o.forEach((t=>t.forEach(((e,r)=>e&&null!==e.getAttribute("piece")?t.splice(r+1):null)))),o},g=(t,e)=>{switch(t){case"rook":return A(e);case"bishop":return b(e);case"horse":return(t=>[document.querySelector(`[posY="${+t.getAttribute("posY")-2}"][posX="${+t.getAttribute("posX")+1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-2}"][posX="${+t.getAttribute("posX")-1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-1}"][posX="${+t.getAttribute("posX")+2}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-1}"][posX="${+t.getAttribute("posX")-2}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")+1}"][posX="${+t.getAttribute("posX")-2}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")+1}"][posX="${+t.getAttribute("posX")+2}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")+2}"][posX="${+t.getAttribute("posX")-1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")+2}"][posX="${+t.getAttribute("posX")+1}"]`)])(e);case"pawn":return(t=>{let e=a(t),r=[document.querySelector(`[posY="${+t.getAttribute("posY")-e}"][posX="${t.getAttribute("posX")}"]`)];return null!==t.getAttribute("firstMove")&&r.push(document.querySelector(`[posY="${+t.getAttribute("posY")-2*e}"][posX="${t.getAttribute("posX")}"]`)),r.forEach(((t,e)=>t&&null!==t.getAttribute("piece")?r.splice(e):null)),r})(e);case"queen":return(t=>[...A(t),...b(t)])(e);case"king":return(t=>[document.querySelector(`[posY="${+t.getAttribute("posY")+1}"][posX="${+t.getAttribute("posX")-1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")+1}"][posX="${+t.getAttribute("posX")}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")+1}"][posX="${+t.getAttribute("posX")+1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")}"][posX="${+t.getAttribute("posX")-1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")}"][posX="${+t.getAttribute("posX")+1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-1}"][posX="${+t.getAttribute("posX")+1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-1}"][posX="${+t.getAttribute("posX")}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-1}"][posX="${+t.getAttribute("posX")-1}"]`)])(e)}};let h=document.querySelector(".board");for(let t=0;t<8;t++)for(let t=0;t<8;t++){let t=document.createElement("div");t.classList.add("square"),h.appendChild(t)}let y=8,$=1,d=document.querySelectorAll(".square"),m=!1;for(let t=0;t<d.length;t++)$>8&&(y--,$=1,m=!m),d[t].setAttribute("posY",y),d[t].setAttribute("posX",$),!1===m?(d[t].style.backgroundColor="#f1f1f1",m=!m):(d[t].style.backgroundColor="#85aa53",m=!m),$++;let Y=new class{create(t,e){switch(t){case"pawn":return new o(t,e);case"rook":return new s(t,e);case"horse":return new u(t,e);case"bishop":return new c(t,e);case"queen":return new i(t,e);case"king":return new p(t,e)}}},X=Y.create("pawn","black"),x=Y.create("rook","black"),f=Y.create("horse","black"),k=Y.create("bishop","black"),q=Y.create("queen","black"),S=Y.create("king","black");const w=t=>{let e=t[0].color;t.forEach((t=>{t.startPos.forEach((r=>{let o=document.querySelector(`[posX="${r.x}"][posY="${r.y}"]`);o.setAttribute("piece",`${e}-${t.name}`),o.classList.add(`${e}-${t.name}`),"pawn"===t.name&&o.setAttribute("firstMove",!0),"king"===t.name&&o.setAttribute("is-checked",0)}))}))};!function(...t){w(t)}(X,x,f,k,q,S),function(...t){w(t)}(Y.create("pawn","white"),Y.create("rook","white"),Y.create("horse","white"),Y.create("bishop","white"),Y.create("queen","white"),Y.create("king","white"));let v=document.querySelector(".current-turn"),E=[],L="white";v.innerHTML=`CURRENT TURN: ${L}`;const M=(t,e)=>{let r=a(t),o=[document.querySelector(`[posY="${+t.getAttribute("posY")-r}"][posX="${+t.getAttribute("posX")-1}"]`),document.querySelector(`[posY="${+t.getAttribute("posY")-r}"][posX="${+t.getAttribute("posX")+1}"]`)];return o.forEach((t=>t&&t.setAttribute(`${e}-attack`,!0))),o.filter((t=>t&&null!==t.getAttribute("piece")&&l(t)!==e))},P=(t,e)=>{let r=[],o=t.target;E.length<2&&E.push(o),2===E.length&&(E[1].classList.contains("next")&&((t=>{let e=t[0],r=t[1],o=l(t[0]);r.classList.remove(r.getAttribute("piece")),r.removeAttribute("piece"),t[0].getAttribute(!0)&&t[0].removeAttribute("firstMove"),"pawn"!==n(t[0])||1!=+t[1].getAttribute("posY")&&8!=+t[1].getAttribute("posY")?(r.classList.add(e.getAttribute("piece")),r.setAttribute("piece",e.getAttribute("piece"))):(r.classList.add(`${o}-queen`),r.setAttribute("piece",`${o}-queen`)),e.classList.remove(e.getAttribute("piece"),"current"),e.removeAttribute("piece")})(E),L="white"===L?"black":"white",v.innerHTML=`CURRENT TURN: ${L}`),E=[],o=null,e.forEach((t=>{t.removeAttribute("white-attack"),t.removeAttribute("black-attack"),t.removeAttribute("is-checked"),t.classList.remove("red")}))),e.forEach((t=>{t.classList.remove("next","current")})),null!==o&&o.getAttribute("piece")&&o.classList.add("current"),(t=>{let e=[];return t.forEach((t=>null!==t.getAttribute("piece")?e.push({current:t,nextMoves:g(n(t),t),color:l(t)}):null)),e.map((t=>{if(t&&"pawn"===n(t.current))return{...t,nextMoves:[...t.nextMoves,...M(t.current,t.color)]};let e=(t=>{let e=[],r="white"===t.color?"black":"white";return t.nextMoves.flat().forEach((o=>{if(o){if("king"===n(t.current)&&!o.getAttribute(`${r}-attack`)&&(null!==o.getAttribute("piece")&&l(o)!==t.color||null===o.getAttribute("piece")))return e.push(o);if(null!==o.getAttribute("piece")&&"king"===n(o)&&l(o)!==t.color)return o.setAttribute("is-checked",1),o.classList.add("red");if(null===o.getAttribute("piece")&&"king"!==n(t.current))return e.push(o);if(null!==o.getAttribute("piece")&&l(o)!==t.color&&"king"!==n(o))return e.push(o)}})),e})(t);return t.nextMoves.flat().forEach((e=>e&&e.setAttribute(`${t.color}-attack`,!0))),{...t,nextMoves:e}}))})(e).forEach((t=>{t.current===o&&r.push(...t.nextMoves)})),r.forEach((t=>{null!==t&&l(o)===L&&t.classList.add("next")}))};d.forEach((t=>{t.addEventListener("click",(t=>{P(t,d)}))}))}},e={};function r(o){if(e[o])return e[o].exports;var s=e[o]={exports:{}};return t[o](s,s.exports,r),s.exports}return r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(272)})();